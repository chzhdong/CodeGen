import{_ as a}from"./bot-avatar-CBCRm2Zm.js";import{u as s}from"./useBots-DbnaIHJs.js";import{r as t,u as e}from"./utils-DgQiGfGs.js";import{r as i}from"./router-c0GRtipE.js";import{g as o}from"./index-B-VGBmzJ.js";import{d as r,j as l,r as n,$ as d,a0 as u,X as c,k as v,B as m,q as b,x as f,c as p,v as _,J as k,C as g,z as h,D as y,Q as j,R as x,A as w}from"./index-BOQWRSv-.js";import{S as B}from"./index-8w8lTtg9.js";const C={class:"container"},I={class:"bot-edit"},$={key:0,class:"loading"},q={key:1},z={class:"header"},A=(a=>(j("data-v-f0ffc33e"),a=a(),x(),a))((()=>b("img",{src:a,alt:"avatar"},null,-1))),K={class:"name"},L={class:"tabs"},Q=["onClick"],R=w(r({__name:"BotEdit",setup(a){const{getCurrentRoute:r,changePage:j}=i(),{tabIndex:x,curBot:w}=l(s()),{setTabIndex:R,setCurBot:S,setKnowledgeList:D}=s(),E=o().bots,F=[{name:E.edit,value:0},{name:E.publish,value:1}],J=n(null),P=n(!0),T=d(u,{style:{fontSize:"48px"},spin:!0}),X=async a=>{try{const s=await t(await e.queryBotInfo({bot_id:a}));S(s[0]),(async a=>{try{let s=[...(await t(await e.kbList())).filter((a=>!/.*_FAQ$/.test(a.kb_name)))];s=a&&a.length?s.map((s=>(a.some((a=>a===s.kb_id))?s.state=1:s.state=0,s))):s.map((a=>(a.state=0,a))),D(s)}catch(s){h.error(s.msg||"获取知识库列表失败")}})(s[0].kb_ids),P.value=!1}catch(s){h.error(s.msg||"获取Bot信息失败")}};return function(){const a=r();J.value=a.value.params.botId,X(J.value)}(),(a,s)=>{var t;const e=B,i=c("router-view");return v(),m("div",C,[b("div",I,[f(P)?(v(),m("div",$,[p(e,{indicator:f(T)},null,8,["indicator"])])):(v(),m("div",q,[b("div",z,[A,b("div",K,_(null==(t=f(w))?void 0:t.bot_name),1),b("div",L,[(v(),m(k,null,g(F,(a=>b("div",{key:a.name,class:y(["tab-item",f(x)===a.value?"tab-active":"",f(w).kb_ids&&f(w).kb_ids.length||1!==a.value?"":"tab-disable"]),onClick:s=>{var t;(1!==(t=a.value)||w.value.kb_ids&&w.value.kb_ids.length)&&x.value!==t&&(R(t),j(0===t?`/bots/${J.value}/edit`:`/bots/${J.value}/publish`))}},_(a.name),11,Q))),64))])]),p(i)]))])])}}}),[["__scopeId","data-v-f0ffc33e"]]);export{R as default};
