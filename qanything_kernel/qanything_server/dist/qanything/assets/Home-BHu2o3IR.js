import{a as e,u as a,C as t,p as s}from"./useUploadFiles-CJjF3D36.js";import{g as l,u as o}from"./index-B-VGBmzJ.js";import{d as n,k as i,B as r,q as c,v as u,x as d,Q as v,R as p,A as h,r as m,c as g,z as y,Y as f,j as k,D as b,S as _,L as w,J as C,C as I,K as x,W as A,a as D,o as S,e as q,l as j,F as L,G as O,n as B,Z as E,E as T,y as F,M as Q}from"./index-BOQWRSv-.js";import{u as R,r as P,a as U,b as z,f as N,C as H}from"./utils-DgQiGfGs.js";import{u as K,a as M,b as V,C as Y,D as J,f as W,h as Z,_ as X,c as $,T as G}from"./ChatInfoPanel-B2MnKrGD.js";import{_ as ee}from"./scroll-down-Dm5D91pw.js";import{u as ae,_ as te}from"./useChatSource-CVdT_vQJ.js";import{C as se}from"./ChatSettingDialog-B0MdGUH7.js";import{u as le}from"./useChatSetting-C_Q_RWik.js";import{u as oe}from"./useBots-DbnaIHJs.js";import{_ as ne}from"./ActionButton-kxRHFmPt.js";import{_ as ie}from"./index-CMd10nF3.js";import{O as re}from"./OptionList-BkiEKHvg.js";import"./index-8w8lTtg9.js";import"./index-C0drqHzp.js";import"./RightOutlined-k6Ldo487.js";import"./CheckOutlined-C0I0DHjL.js";import"./index-4PmJ48K0.js";import"./slide-a1Tp5F_n.js";import"./index-C23k2m5x.js";import"./collapseMotion-CxcQHKaF.js";import"./class-FJ4HjPo2.js";import"./index-Cfg1_ubR.js";import"./index-CyFJb4x8.js";import"./index-C7EFTC32.js";import"./injectionKey-BS_bSTfS.js";const ce={class:"upload-box"},ue=(e=>(v("data-v-ec2d7664"),e=e(),p(),e))((()=>c("img",{class:"icon-file",src:"/qanything/assets/icon-file-Bxz0aRpP.png",alt:"图标"},null,-1))),de={class:"title"},ve={class:"desc-content"},pe={class:"desc"},he={class:"desc"},me=h(n({__name:"UploadDom",props:{acceptList:{require:!0,type:Array,default:()=>[]}},emits:["update"],setup(e,{emit:a}){const t=l().home,s=a,o=()=>{s("update")};return(e,a)=>(i(),r("div",ce,[c("div",{class:"tips",onClick:o},[ue,c("p",de,u(d(t).startDec),1),c("div",ve,[c("p",pe,u(d(t).updesc2),1),c("p",he,u(d(t).require1),1)])])]))}}),[["__scopeId","data-v-ec2d7664"]]),ge={class:"default"},ye={class:"box"},fe={class:"title"},ke=(e=>(v("data-v-387b8125"),e=e(),p(),e))((()=>c("span",null," ",-1))),be={class:"color"},_e={class:"desc"},we=h(n({__name:"Defaultpage",setup(t){const s=l().home,{setFileList:o}=e(),{setModalVisible:n}=e(),{setCurrentId:v,getList:p,setCurrentKbName:h}=a(),f=[".doc",".docx",".ppt",".pptx",".xls",".xlsx",".pdf",".md",".jpg",".jpeg",".png",".txt",".eml"],k=m(""),b=async()=>{try{const e=await R.createKb({kb_name:s.defaultName});200==+e.code&&(k.value=e.data.kb_id,v(e.data.kb_id),h(e.kb_name),n(!0),p())}catch(e){o([]),y.error(e.msg)}};return(e,a)=>(i(),r("div",ge,[c("div",ye,[c("p",fe,[c("span",null,u(d(s).homeTitle1),1),ke,c("span",be,u(d(s).homeTitle2),1)]),c("p",_e,u(d(s).defaultDec),1),g(me,{"accept-list":f,onUpdate:b})])]))}}),[["__scopeId","data-v-387b8125"]]),Ce=f("useHomeChat",(()=>{const e=m([]),a=m([]),t=e=>{a.value=e},s=m([]),l=m(null),o=m(1),n=m(1);return{QA_List:e,setQaList:a=>{e.value=a},historyList:a,addHistoryList:e=>{var s;const l=((null==(s=a.value.at(-1))?void 0:s.historyId)||0)+1,o={historyId:l,title:e},n=[...a.value,o];return t(n),l},deleteHistoryList:e=>{const s=a.value.filter((a=>a.historyId!==e));t(s)},updateHistoryList:(e,s,l)=>{const o=a.value.map((a=>(a.historyId===s&&(a.title=e,a.kbIds=l),a)));t(o)},chatList:s,addChatList:(e,a)=>{const t={historyId:e,list:a};s.value.some((a=>a.historyId===e))?s.value.forEach((t=>{t.historyId===e&&(t.list=a)})):s.value.push(t)},getChatById:e=>s.value.filter((a=>a.historyId===e))[0],clearChatList:e=>{s.value=s.value.filter((a=>a.historyId!==e)),a.value=a.value.filter((a=>a.historyId!==e))},chatId:l,setChatId:e=>{l.value=e},pageId:o,setPageId:e=>{o.value=e},qaPageId:n,setQaPageId:e=>{n.value=e}}}),{persist:{storage:localStorage}}),Ie={class:"history-chat"},xe={class:"history-chat-content"},Ae={class:"list"},De=(e=>(v("data-v-b9aad642"),e=e(),p(),e))((()=>c("div",{class:"line"},null,-1))),Se=["onClick"],qe=["onClick"],je=h(n({__name:"HistoryChat",props:{observer:{type:Object,required:!0},observeDom:{type:Object,default:null},qaObserver:{type:Object,required:!0},qaObserveDom:{type:Object,default:null},showLoading:{type:Boolean,require:!0}},emits:["scrollBottom","setObserveDom","setQaObserverDom","clearHistory"],setup(e,{emit:t}){const s=e,{chatList:o,chatId:n,QA_List:v,qaPageId:p,pageId:h,historyList:m}=k(Ce()),{deleteHistoryList:f,getChatById:D}=Ce(),{setSelectList:S}=a(),q=t;async function j(e){if(!s.showLoading){n.value=e.historyId,v.value=[],p.value=1,S([...e.kbIds]),q("clearHistory");try{const e=D(n.value);null!==s.qaObserveDom&&(s.qaObserver.unobserve(s.qaObserveDom),q("setQaObserverDom",null)),e.list.forEach((e=>{var a,t,s,l,o,n,i;"user"===e.type?(i=e.question,v.value.push({question:i,type:"user"})):"ai"===e.type&&(a=e.question,t=e.itemInfo,s=e.answer,l=e.picList,o=e.qaId,n=e.source,v.value.push({answer:s,question:a,itemInfo:t,type:"ai",qaId:o,copied:!1,like:!1,unlike:!1,source:n||[],showTools:!0,picList:l}))})),q("scrollBottom"),e.list.length>=50&&await A((()=>{const e=document.getElementsByClassName("chat-li");e.length&&(s.qaObserver.observe(e[0]),q("setQaObserverDom",e[0]))}))}catch(a){y.error(a.msg||"获取问答历史失败")}}}function L(){s.showLoading||(null!==n.value?(n.value=null,v.value=[],p.value=1,h.value=1,q("clearHistory")):y.info("已切换最新对话"))}async function O(e,a){if(!s.showLoading)try{f(e.historyId),e.historyId===n.value&&L(),y.success("删除成功"),o.value.splice(a,1),await A((()=>{!function(){if(null!==s.qaObserveDom){s.qaObserver.unobserve(s.qaObserveDom),q("setQaObserverDom",null);const e=document.getElementsByClassName("chat-li");e.length&&(s.qaObserver.observe(e[0]),q("setQaObserverDom",e[0]))}}()}))}catch(t){y.error(t.msg||"删除失败")}}return(a,t)=>(i(),r("div",Ie,[c("div",xe,[c("div",Ae,[c("div",{class:b(["new-chat",[e.showLoading?"disabled":"",null===d(n)?"new-active":""]]),onClick:L},[g(_,{name:"new-chat"}),w(" "+u(d(l)().home.newConversation),1)],2),(i(!0),r(C,null,I(d(m),((a,t)=>(i(),r("div",{key:a.historyId,class:b(["chat-item",d(n)===a.historyId?"item-active":"",e.showLoading?"disabled":""])},[De,c("span",{onClick:e=>j(a)},u(a.title),9,Se),d(n)===a.historyId?(i(),r("img",{key:0,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEgSURBVFiF7ZaxDcJADEVt0lAyQkaAKzIHI0BxkmeKCxiFAaKDDRAdJQvkQpNIEeQu9gVoyK8SXZz/ZPssA8ya9e/KYofW2nVRFMuqqh4pP5fEL0IHRJQj4tl7f7XW7hLMd734tRqgrutV94yIBw1Ea37o3rMsC2YgWALn3N0Yc0PEbQuxNcbcnHMXjXnTNPuyLE9qgBbiooEYMmfmY8wjCqCBSDEXAUggUs0BAFDyUachoxYoyVwNMATRl9YcQFiCvl7LMcUcIDIHfiV1BkIlkM6Jt7gp5p9oQnEGQldNO6ySAMbu+RSIUQDpkEmFGNsHVBMuBSLYhESUe++vUvMR8A0zD0KI9gFtZzPzsbshAPF9ICoiymPbzLfjZ836Dz0BusANDR+zFvgAAAAASUVORK5CYII=",class:"close-icon",alt:"close",onClick:e=>O(a,t)},null,8,qe)):x("",!0)],2)))),128))])])]))}}),[["__scopeId","data-v-b9aad642"]]),Le=e=>(v("data-v-1ba85d3a"),e=e(),p(),e),Oe={class:"container showSider"},Be={class:"my-page"},Ee={key:0,class:"user"},Te=Le((()=>c("img",{class:"avatar",src:X,alt:"头像"},null,-1))),Fe={class:"question-text"},Qe={key:1,class:"ai"},Re=Le((()=>c("img",{class:"avatar",src:$,alt:"头像"},null,-1))),Pe={class:"ai-content"},Ue={class:"ai-right"},ze={key:0},Ne={key:1},He={class:"source-list"},Ke={class:"control"},Me={class:"tips"},Ve=["href"],Ye=["onClick"],Je={class:"source-content"},We={class:"score"},Ze={class:"tips"},Xe={key:1,class:"feed-back"},$e=["onClick"],Ge={class:"reload-text"},ea={class:"tools"},aa={key:0,class:"stop-btn"},ta={class:"question-box"},sa={class:"question"},la={class:"send-box"},oa={class:"send-action"},na=h(n({__name:"Chat",setup(e){const s=l().common,n=new G((e=>{e&&(h.value[h.value.length-1].answer+=e||"")})),{selectList:v,knowledgeBaseList:p}=k(a()),{QA_List:h,chatId:f,pageId:X,qaPageId:$,historyList:re}=k(Ce()),{chatSettingFormActive:ce}=k(le()),{copy:ue}=K(),{addHistoryList:de,updateHistoryList:ve,addChatList:pe,clearChatList:he}=Ce(),{setChatSourceVisible:me,setSourceType:ge,setSourceUrl:ye,setTextContent:fe}=ae(),{setCopyUrlVisible:ke,setWebUrl:be}=oe(),{language:_e}=k(o()),we=m(""),Ie=D((()=>{const e=ce.value.context;if(0===e)return[];const a=h.value.filter((e=>"ai"===e.type));return(11===e?a:a.slice(-e)).map((e=>[e.question,e.answer]))})),xe=m(!1),Ae=m([]),De=m(null),Se=m(null);let qe;const Le=m(null),na=m(null),ia=()=>{A((()=>{A((()=>{var e;null==(e=na.value)||e.scrollIntoView({behavior:"smooth",block:"end"})}))}))},ra=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&X.value++}))})),ca=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&$.value++}))}));S((()=>{ia()})),q((()=>{De.value&&ra.unobserve(De.value),Se.value&&ca.unobserve(Se.value)}));const ua=e=>{13===e.keyCode&&(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?we.value+="\n":fa(),e.preventDefault())},da=M(((e,a)=>{if(e.like=!e.like,e.unlike=!1,_czc.push(["_trackEvent","qanything","问答页面","点赞","",""]),e.like){a.target.parentNode.style.animation="shake ease-in .5s";const e=setTimeout((()=>{clearTimeout(e),a.target.parentNode.style.animation=""}),600)}}),800),va=e=>{h.value.push({answer:"",question:e,onlySearch:ce.value.capabilities.onlySearch,type:"ai",copied:!1,like:!1,unlike:!1,source:[],showTools:!1})},pa=new H,ha=e=>{De.value=e},ma=e=>{Se.value=e},ga=(e,a,t)=>{try{ve(e,a,t)}catch(s){y.error(s.msg||"更新对话失败")}};const ya=()=>{qe&&qe.abort("停止对话"),n.done(),xe.value=!1,h.value[h.value.length-1].showTools=!0},fa=async()=>{if(!we.value.trim().length)return;if(xe.value)return void y.warn("正在聊天中...请等待结束");if(!(await qa()))return void y.error("模型设置错误，请先检查模型配置");if(function(){if(!v.value.length)return;const e=[];v.value.forEach((a=>{p.value.some((e=>e.kb_id===a))&&e.push(a)})),v.value=e,re.value.forEach((e=>{null!==f.value&&e.historyId===f.value&&e.kbIds.join("")!==v.value.join("")&&ga(e.title,e.historyId,v.value)}))}(),!v.value.length)return y.warning(s.chooseError);y.info({content:"zh"===s.type?`已选择 ${v.value.length} 个知识库进行问答`:` ${v.value.length} knowledge base has been selected`,icon:" "});const e=we.value;(e=>{try{if(null!==f.value)return;e.length>100&&(e=e.substring(0,100)),f.value=de(e),ga(e,f.value,v.value)}catch(a){y.error(a.msg||"创建对话失败")}})(e),we.value="",(e=>{h.value.push({question:e,type:"user"}),ia()})(e),pe(f.value,h.value),xe.value=!0,qe=new AbortController;const a={kb_ids:v.value,history:Ie.value,question:e,streaming:!1===ce.value.capabilities.onlySearch,networking:ce.value.capabilities.networkSearch,product_source:"saas",rerank:ce.value.capabilities.rerank,only_need_search_results:ce.value.capabilities.onlySearch,hybrid_search:ce.value.capabilities.mixedSearch,max_token:ce.value.maxToken,api_base:ce.value.apiBase,api_key:ce.value.apiKey,model:ce.value.apiModelName,api_context_length:ce.value.apiContextLength,chunk_size:ce.value.chunkSize,top_p:ce.value.top_P,top_k:ce.value.top_K,temperature:ce.value.temperature};if(ce.value.capabilities.onlySearch){pa.addChatSetting(ce.value),va(e);try{const e=await P(await R.sendQuestion(a,{signal:qe.signal}));200===e.code&&(h.value[h.value.length-1].answer=(null==e?void 0:e.source_documents.length)?s.searchCompleted:s.searchNotFound,h.value[h.value.length-1].source=null==e?void 0:e.source_documents)}catch(t){h.value[h.value.length-1].answer=t.msg||"error"}xe.value=!1,h.value[h.value.length-1].showTools=!0,pe(f.value,h.value),await A((()=>{ia()}))}else W(z+"/local_doc_qa/local_doc_chat",{method:"POST",headers:{"Content-Type":"application/json",Accept:["text/event-stream","application/json"]},openWhenHidden:!0,body:JSON.stringify({user_id:U,...a}),signal:qe.signal,onopen(a){va(e),a.ok&&"text/event-stream"===a.headers.get("content-type")?(pa.addChatSetting(ce.value),n.start()):"application/json"===a.headers.get("content-type")&&n.add("Error 请检查模型是否配置正确")},onmessage(e){var a,t;const s=JSON.parse(e.data);if(200==(null==s?void 0:s.code)&&(null==s?void 0:s.response)&&"success"===s.msg)n.add(null==s?void 0:s.response),ia();else{delete s.time_record.time_usage.retriever_search_by_milvus,pa.addTime(s.time_record.time_usage),pa.addToken(s.time_record.token_usage),pa.addDate(Date.now())}(null==(a=null==s?void 0:s.source_documents)?void 0:a.length)&&(h.value[h.value.length-1].source=null==s?void 0:s.source_documents),(null==(t=null==s?void 0:s.show_images)?void 0:t.length)&&(null==s||s.show_images.map((e=>{n.add(e)})))},onclose(e){n.done(),qe.abort(),xe.value=!1,h.value[h.value.length-1].showTools=!0,h.value.at(-1).itemInfo=pa.getChatInfo(),pe(f.value,h.value),A((()=>{ia()}))},onerror(e){throw null==n||n.done(),null==qe||qe.abort(),xe.value=!1,h.value[h.value.length-1].showTools=!0,y.error(e.msg||"出错了"),pe(f.value,h.value),A((()=>{ia()})),e}})},ka=async()=>{if(0!==v.value.length)try{const{bot_id:e}=await P(await R.createBot({bot_name:"bot-"+N(Date.now()),description:"来源: 知识库创建-"+N(Date.now())}));await P(await R.updateBot({bot_id:e,kb_ids:[...v.value],only_need_search_results:ce.value.capabilities.onlySearch,networking:ce.value.capabilities.networkSearch,api_base:ce.value.apiBase,api_key:ce.value.apiKey,api_context_length:ce.value.apiContextLength,top_p:ce.value.top_P,temperature:ce.value.temperature,top_k:ce.value.top_K,model:ce.value.apiModelName,max_token:ce.value.maxToken,hybrid_search:ce.value.capabilities.mixedSearch,chunk_size:ce.value.chunkSize,rerank:ce.value.capabilities.rerank})),ke(!0);const{origin:a,pathname:t}=window.location;be(`${a+t}#/bots/${e}/share`)}catch(e){y.error((null==e?void 0:e.msg)||"分享失败")}},{showModal:ba}=k(V()),_a=m(!1),wa=m(""),Ca=m(""),Ia=()=>{xe.value||(Ca.value="download",ba.value=!0,wa.value=s.saveTip)},xa=()=>{xe.value||(Ca.value="delete",ba.value=!0,wa.value=s.clearTip)},Aa=async()=>{if(_a.value=!0,"download"===Ca.value)try{const e=document.getElementById("chat-ul"),a=(await Z(e,{useCORS:!0})).toDataURL("image/png"),t=document.createElement("a");t.style.display="none",t.href=a,t.setAttribute("download","chat-shot.png"),void 0===t.download&&t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(a),y.success("下载成功"),Promise.resolve()}catch(e){y.error(e.message||e.msg||"出错了")}else"delete"===Ca.value&&(he(f.value),f.value=null,h.value=[]);Ca.value="",wa.value="",_a.value=!1,ba.value=!1},{showSettingModal:Da}=k(V()),Sa=m(),qa=()=>Sa.value.handleOk();let ja=["pdf","docx","xlsx","txt","md","jpg","png","jpeg","csv","eml"];const La=e=>{if(!e)return!1;const a=e.split(".");if(a.length){const e=a.pop();return!!ja.includes(e)}return!1},Oa=e=>{La(e.file_name)&&async function(e){try{ye(null);const a=await P(await R.getFile({file_id:e.file_id})),t=e.file_name.split(".").pop(),s=function(e){const a=ja.indexOf(e);return Ba[a]}(t);if(ge(t),ye(`data:${s};base64,${a.file_base64}`),"txt"===t||"md"===t||"csv"===t||"eml"===t){const e=atob(a.file_base64),t=decodeURIComponent(escape(e));fe(t),me(!0)}else me(!0)}catch(a){y.error(a.msg||"获取文件失败")}}(e)};let Ba=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/markdown","image/jpeg","image/png","image/jpeg","text/csv","message/rfc822","application/vnd.openxmlformats-officedocument.presentationml.presentation"];function Ea(){}return(e,a)=>{const l=Q,o=ne,n=ie;return i(),r(C,null,[g(je,{observer:d(ra),"observe-dom":d(De),"qa-observe-dom":d(Se),"qa-observer":d(ca),"show-loading":d(xe),onScrollBottom:ia,onSetObserveDom:ha,onSetQaObserverDom:ma,onClearHistory:Ea},null,8,["observer","observe-dom","qa-observe-dom","qa-observer","show-loading"]),c("div",Oe,[c("div",Be,[c("div",{id:"chat",ref_key:"chatContainer",ref:Le,class:"chat showSider"},[c("ul",{id:"chat-ul",ref_key:"scrollDom",ref:na},[(i(!0),r(C,null,I(d(h),((e,a)=>{var t,l;return i(),r("li",{key:a},["user"===e.type?(i(),r("div",Ee,[Te,c("p",Fe,u(e.question),1)])):(i(),r("div",Qe,[Re,c("div",Pe,[c("div",Ue,[c("p",{class:b(["question-text",[e.source.length||(null==(t=null==e?void 0:e.picList)?void 0:t.length)?"":"change-radius",e.showTools?"":"flashing"]])},[g(te,{content:e.answer.toString()},null,8,["content"]),Object.keys((null==(l=null==e?void 0:e.itemInfo)?void 0:l.tokenInfo)||{}).length?(i(),j(Y,{key:0,"chat-item-info":e.itemInfo},null,8,["chat-item-info"])):x("",!0)],2),e.source.length?(i(),r(C,{key:0},[c("div",{class:b(["source-total",d(Ae).includes(a)?"":"source-total-last"])},["zh"===d(_e)?(i(),r("span",ze," 找到了"+u(e.source.length)+"个信息来源： ",1)):(i(),r("span",Ne," Found "+u(e.source.length)+" source of information ",1)),L(g(_,{name:"down",onClick:e=>(e=>{Ae.value.push(e)})(a)},null,8,["onClick"]),[[O,!d(Ae).includes(a)]]),L(g(_,{name:"up",onClick:e=>(e=>{Ae.value=Ae.value.filter((a=>a!==e))})(a)},null,8,["onClick"]),[[O,d(Ae).includes(a)]])],2),L(c("div",He,[(i(!0),r(C,null,I(e.source,((a,t)=>(i(),r("div",{key:t,class:"data-source"},[L(c("p",Ke,[c("span",Me,u(d(s).dataSource)+u(t+1)+":",1),a.file_url.startsWith("http")?(i(),r("a",{key:0,href:a.file_url,target:"_blank"},u(a.file_name),9,Ve)):(i(),r("span",{key:1,class:b(["file",La(a.file_name)?"filename-active":""]),onClick:e=>Oa(a)},u(a.file_name),11,Ye)),L(g(_,{name:"iconup",onClick:a=>((e,a)=>{e.source[a].showDetailDataSource=!1})(e,t)},null,8,["onClick"]),[[O,a.showDetailDataSource]]),L(g(_,{name:"icondown",onClick:a=>((e,a)=>{e.source[a].showDetailDataSource=!e.source[a].showDetailDataSource})(e,t)},null,8,["onClick"]),[[O,!a.showDetailDataSource]])],512),[[O,a.file_name]]),g(E,{name:"sourceitem"},{default:B((()=>[L(c("div",Je,[g(te,{content:a.content},null,8,["content"]),c("p",We,[c("span",Ze,u(d(s).correlation),1),w(" "+u(a.score),1)])],512),[[O,a.showDetailDataSource]])])),_:2},1024)])))),128))],512),[[O,d(Ae).includes(a)]])],64)):x("",!0),e.showTools?(i(),r("div",Xe,[c("div",{class:"reload-box",onClick:a=>(e=>{we.value=e.question,fa()})(e)},[g(_,{name:"reload"}),c("span",Ge,u(d(s).regenerate),1)],8,$e),c("div",ea,[g(_,{style:T({color:e.copied?"#4D71FF":""}),name:"copy",onClick:a=>(e=>{ue(e.answer).then((()=>{e.copied=!e.copied,y.success(s.copySuccess,1);const a=setTimeout((()=>{clearTimeout(a),e.copied=!e.copied}),1e3)})).catch((()=>{y.error(s.copyFailed,1)}))})(e)},null,8,["style","onClick"]),g(_,{style:T({color:e.like?"#4D71FF":""}),name:"like",onClick:a=>d(da)(e,a)},null,8,["style","onClick"]),g(_,{style:T({color:e.unlike?"#4D71FF":""}),name:"unlike",onClick:a=>(e=>{e.unlike=!e.unlike,e.like=!1,_czc.push(["_trackEvent","qanything","问答页面","点踩","",""])})(e)},null,8,["style","onClick"])])])):x("",!0)])])]))])})),128))],512)],512),d(xe)?(i(),r("div",aa,[g(l,{onClick:ya},{icon:B((()=>[g(_,{name:"stop",class:b(d(xe)?"loading":"")},null,8,["class"])])),default:B((()=>[w(" "+u(d(s).stop),1)])),_:1})])):x("",!0),c("div",ta,[c("div",sa,[c("div",la,[g(o,{value:d(we),"onUpdate:value":a[0]||(a[0]=e=>F(we)?we.value=e:null),class:"send-textarea","max-length":"200",bordered:!1,placeholder:d(s).problemPlaceholder,"auto-size":{minRows:1,maxRows:8},onKeydown:ua},null,8,["value","placeholder"]),c("div",oa,[g(n,null,{content:B((()=>[w(u(d(v).length?d(s).chatShare:d(s).chatShareNoChatId),1)])),default:B((()=>[c("span",{class:b(["question-icon",d(xe)||!d(v).length?"isPreventClick":""]),onClick:ka},[g(_,{name:"chat-share"})],2)])),_:1}),g(n,{placement:"topLeft"},{content:B((()=>[w(u(d(s).chatToPic),1)])),default:B((()=>[c("span",{class:b(["question-icon",d(xe)?"isPreventClick":""]),onClick:Ia},[g(_,{name:"chat-download"})],2)])),_:1}),g(n,null,{content:B((()=>[w(u(d(s).clearChat),1)])),default:B((()=>[c("span",{class:b(["question-icon",d(xe)?"isPreventClick":""]),onClick:xa},[g(_,{name:"chat-delete"})],2)])),_:1}),g(n,null,{content:B((()=>[w(u(d(s).modelSettingTitle),1)])),default:B((()=>[c("span",{class:"question-icon",onClick:a[1]||(a[1]=e=>{return a=!0,void(Da.value=a);var a})},[g(_,{name:"chat-setting"})])])),_:1}),g(l,{type:"primary",disabled:d(xe),shape:"circle",onClick:fa},{default:B((()=>[g(_,{name:"sendplane"})])),_:1},8,["disabled"])])])])])]),c("div",{class:"scroll-btn-div"},[c("img",{class:"avatar",src:ee,alt:"滑到底部",onClick:ia})])]),g(se,{ref_key:"chatSettingForDialogRef",ref:Sa},null,512),g(J,{content:d(wa),"confirm-loading":d(_a),onOk:Aa},null,8,["content","confirm-loading"]),g(t)],64)}}}),[["__scopeId","data-v-1ba85d3a"]]),ia={class:"page"},ra={class:"container"},ca={key:0,class:"initing"},ua=h(n({__name:"Home",setup(e){const{showDefault:t}=k(a()),{setDefault:l,getList:o}=a(),n=e=>{l(e),o()};return S((()=>{o()})),(e,a)=>(i(),r("div",ia,[c("div",ra,[d(t)===d(s).initing?(i(),r("div",ca)):x("",!0),d(t)===d(s).default?(i(),j(we,{key:1,onChange:n})):d(t)===d(s).normal?(i(),j(na,{key:2})):d(t)===d(s).optionlist?(i(),j(re,{key:3})):x("",!0)])]))}}),[["__scopeId","data-v-9dc9deec"]]);export{ua as default};
